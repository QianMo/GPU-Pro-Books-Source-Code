<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PowerVR SDK</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<table width="100%">
  <tr>
    <td width="33%">
      <p align="left">&nbsp;<a href="http://www.imgtec.com"><img border="0" src="IMGLogo.jpg" width="200" height="30"></a></p>
    </td>
    <td width="33%">
      <p align="center"><font color="#808080" face="Arial" size="2">PowerVR Software Development Kit</a></font></p>
    </td>
    <td width="34%">
      <p align="right"><a href="http://www.powervr.com"><img border="0" src="PVRlogo.jpg" width="200" height="27"></a></p>
    </td>
  </tr>
</table>
<hr>
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>dynamicArray.h</h1><a href="dynamicArray_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/******************************************************************************</span>
00002 <span class="comment"></span>
00003 <span class="comment"> @File         dynamicArray.h</span>
00004 <span class="comment"></span>
00005 <span class="comment"> @Title        Console Log</span>
00006 <span class="comment"></span>
00007 <span class="comment"> @Copyright    Copyright (C)  Imagination Technologies Limited.</span>
00008 <span class="comment"></span>
00009 <span class="comment"> @Platform     ANSI compatible</span>
00010 <span class="comment"></span>
00011 <span class="comment"> @Description  Expanding array template class. Allows appending and direct</span>
00012 <span class="comment">               access. Mixing access methods should be approached with caution.</span>
00013 <span class="comment"></span>
00014 <span class="comment">******************************************************************************/</span>
00015 <span class="preprocessor">#ifndef DYNAMIC_ARRAY_H</span>
00016 <span class="preprocessor"></span><span class="preprocessor">#define DYNAMIC_ARRAY_H</span>
00017 <span class="preprocessor"></span>
00018 <span class="preprocessor">#include "assert.h"</span>
00019 <span class="preprocessor">#include "../PVRTGlobal.h"</span>
00020 
00021 <span class="comment">/*!****************************************************************************</span>
00022 <span class="comment">Class</span>
00023 <span class="comment">******************************************************************************/</span>
00024 
00025 <span class="comment">/*!***************************************************************************</span>
00026 <span class="comment">* @Class dynamicArray</span>
00027 <span class="comment">* @Brief Expanding array template class.</span>
00028 <span class="comment">* @Description Expanding array template class.</span>
00029 <span class="comment">*****************************************************************************/</span>
00030 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
00031 <span class="keyword">class </span><a class="code" href="classdynamicArray.html">dynamicArray</a>
00032 {
00033 <span class="keyword">public</span>:
00034     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classdynamicArray.html#s0">c_i32DefaultSize</a> = 8;
00035     <span class="comment">/*!***************************************************************************</span>
<a name="l00036"></a><a class="code" href="classdynamicArray.html">00036</a> <span class="comment">    @Function           dynamicArray</span>
00037 <span class="comment">    @Description        Blank constructor. Makes a default sized array.</span>
00038 <span class="comment">    *****************************************************************************/</span>
<a name="l00039"></a><a class="code" href="classdynamicArray.html#s0">00039</a>     <a class="code" href="classdynamicArray.html#a0">dynamicArray</a>():
00040     m_i32Size(0),
00041         m_i32Capacity(c_i32DefaultSize)
00042     {
00043         m_pArray = <span class="keyword">new</span> T[c_i32DefaultSize];
00044     }
<a name="l00045"></a><a class="code" href="classdynamicArray.html#a0">00045</a> 
00046     <span class="comment">/*!***************************************************************************</span>
00047 <span class="comment">    @Function           dynamicArray</span>
00048 <span class="comment">    @Input              i32Size intial size of array</span>
00049 <span class="comment">    @Description        Constructor taking initial size of array in elements.</span>
00050 <span class="comment">    *****************************************************************************/</span>
00051     <a class="code" href="classdynamicArray.html#a0">dynamicArray</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> i32Size):
00052     m_i32Size(0),
00053         m_i32Capacity(i32Size)
00054     {
00055         _ASSERT(i32Size!=0);
00056         m_pArray = <span class="keyword">new</span> T[i32Size];
00057     }
<a name="l00058"></a><a class="code" href="classdynamicArray.html#a1">00058</a> 
00059     <span class="comment">/*!***************************************************************************</span>
00060 <span class="comment">    @Function           dynamicArray</span>
00061 <span class="comment">    @Input              original    the other dynamic array</span>
00062 <span class="comment">    @Description        Copy constructor.</span>
00063 <span class="comment">    *****************************************************************************/</span>
00064     <a class="code" href="classdynamicArray.html#a0">dynamicArray</a>(<span class="keyword">const</span> <a class="code" href="classdynamicArray.html">dynamicArray</a>&amp; original):
00065     m_i32Size(original.m_i32Size),
00066         m_i32Capacity(original.m_i32Capacity)
00067     {
00068         m_pArray = <span class="keyword">new</span> T[m_i32Capacity];
00069         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;i++)
00070         {
00071             m_pArray[i]=original.<a class="code" href="classdynamicArray.html#r2">m_pArray</a>[i];
<a name="l00072"></a><a class="code" href="classdynamicArray.html#a2">00072</a>         }
00073     }
00074 
00075     <span class="comment">/*!***************************************************************************</span>
00076 <span class="comment">    @Function           dynamicArray</span>
00077 <span class="comment">    @Input              pArray  an ordinary array</span>
00078 <span class="comment">    @Input              i32Size     number of elements passed</span>
00079 <span class="comment">    @Description        constructor from ordinary array.</span>
00080 <span class="comment">    *****************************************************************************/</span>
00081     <a class="code" href="classdynamicArray.html#a0">dynamicArray</a>(<span class="keyword">const</span> T* <span class="keyword">const</span> pArray, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i32Size):
00082     m_i32Size(i32Size),
00083         m_i32Capacity(i32Size)
00084     {
00085         m_pArray = <span class="keyword">new</span> T[i32Size];
00086         <span class="comment">// copy old values to new array</span>
00087         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;m_i32Size;i++)
00088         {
00089             m_pArray[i]=pArray[i];
<a name="l00090"></a><a class="code" href="classdynamicArray.html#a3">00090</a>         }
00091     }
00092 
00093     <span class="comment">/*!***************************************************************************</span>
00094 <span class="comment">    @Function           ~dynamicArray</span>
00095 <span class="comment">    @Description        Destructor.</span>
00096 <span class="comment">    *****************************************************************************/</span>
00097     <a class="code" href="classdynamicArray.html#a4">~dynamicArray</a>()
00098     {
00099         <span class="keywordflow">if</span>(m_pArray)
00100             <span class="keyword">delete</span>[](m_pArray);
00101     }
00102 
00103 
00104     <span class="comment">/*!***************************************************************************</span>
00105 <span class="comment">    @Function           append</span>
00106 <span class="comment">    @Input              addT    The element to append</span>
<a name="l00107"></a><a class="code" href="classdynamicArray.html#a4">00107</a> <span class="comment">    @Description        appends an element to the end of the array, expanding it</span>
00108 <span class="comment">    if necessary.</span>
00109 <span class="comment">    *****************************************************************************/</span>
00110     <span class="keywordtype">void</span> <a class="code" href="classdynamicArray.html#a5">append</a>(T addT)
00111     {
00112         <span class="keywordflow">if</span>(m_i32Size==m_i32Capacity)        <span class="comment">// should never be &gt;</span>
00113         {   <span class="comment">// expand array: expensive</span>
00114 
00115             m_i32Capacity*=2;   <span class="comment">// array doubles in size for each expansion</span>
00116             T *pDeadArray,*pNewArray = <span class="keyword">new</span> T[m_i32Capacity]; <span class="comment">// make new array</span>
00117 
00118             <span class="comment">// copy old values to new array</span>
00119             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;i++)
00120             {
<a name="l00121"></a><a class="code" href="classdynamicArray.html#a5">00121</a>                 pNewArray[i]=m_pArray[i];
00122             }
00123 
00124 
00125             pDeadArray = m_pArray;
00126             m_pArray = pNewArray;
00127             <span class="keyword">delete</span>[](pDeadArray);
00128         }
00129         <span class="comment">// add new element to end of array</span>
00130 
00131         m_pArray[m_i32Size] = addT;
00132         m_i32Size++;
00133     }
00134 
00135     <span class="comment">/*!***************************************************************************</span>
00136 <span class="comment">    @Function           prepend</span>
00137 <span class="comment">    @Input              addT    The element to prepend</span>
00138 <span class="comment">    @Description        prepend an element to the beginning of the array, expanding</span>
00139 <span class="comment">    it if necessary.</span>
00140 <span class="comment">    *****************************************************************************/</span>
00141     <span class="keywordtype">void</span> <a class="code" href="classdynamicArray.html#a6">prepend</a>(T addT)
00142     {
00143         <span class="keywordflow">if</span>(m_i32Size==m_i32Capacity)
00144         {   <span class="comment">// expand array</span>
00145 
00146             m_i32Capacity*=2;   <span class="comment">// array doubles in size for each expansion</span>
00147             T *pDeadArray,*pNewArray = <span class="keyword">new</span> T[m_i32Capacity]; <span class="comment">// make new array</span>
00148 
00149             <span class="comment">// copy all leaving a space at the start</span>
00150             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;i++)
00151             {
00152                 pNewArray[i+1]=m_pArray[i];
<a name="l00153"></a><a class="code" href="classdynamicArray.html#a6">00153</a>             }
00154 
00155             pDeadArray = m_pArray;
00156             m_pArray = pNewArray;
00157             <span class="keyword">delete</span>[](pDeadArray);
00158         }
00159         <span class="keywordflow">else</span>
00160         {
00161             <span class="comment">// copy all leaving a space at the start</span>
00162             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;i++)
00163             {
00164                 m_pArray[i+1]=m_pArray[i];
00165             }
00166         }
00167         <span class="comment">// add new element to end of array</span>
00168         m_pArray[0] = addT;
00169         m_i32Size++;
00170     }
00171 
00172     <span class="comment">/*!***************************************************************************</span>
00173 <span class="comment">    @Function           =</span>
00174 <span class="comment">    @Input              other   The dynamic array needing copied</span>
00175 <span class="comment">    @Description        assignment operator.</span>
00176 <span class="comment">    *****************************************************************************/</span>
00177     <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;
00178         <a class="code" href="classdynamicArray.html">dynamicArray</a>&amp; <a class="code" href="classdynamicArray.html#a7">operator=</a>(<span class="keyword">const</span> <a class="code" href="classdynamicArray.html">dynamicArray&lt;T2&gt;</a>&amp; other)
00179     {
00180         <span class="keywordflow">if</span>(m_pArray)
00181             <span class="keyword">delete</span>[](m_pArray);
00182 
00183         m_pArray = <span class="keyword">new</span> T2[other.<a class="code" href="classdynamicArray.html#r1">m_i32Capacity</a>];
00184         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;other.<a class="code" href="classdynamicArray.html#r0">m_i32Size</a>;i++)
00185         {
00186             m_pArray[i]=other.<a class="code" href="classdynamicArray.html#r2">m_pArray</a>[i];
00187         }
00188         m_i32Capacity = other.<a class="code" href="classdynamicArray.html#r1">m_i32Capacity</a>;
00189         m_i32Size = other.<a class="code" href="classdynamicArray.html#r0">m_i32Size</a>;
00190         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00191"></a><a class="code" href="classdynamicArray.html#a7">00191</a>     }
00192 
00193     <span class="comment">/*!***************************************************************************</span>
00194 <span class="comment">    @Function           []</span>
00195 <span class="comment">    @Input              i32Index    index of element in array</span>
00196 <span class="comment">    @Return             the element indexed</span>
00197 <span class="comment">    @Description        indexed access into array. Note that this has no error</span>
00198 <span class="comment">    checking whatsoever</span>
00199 <span class="comment">    *****************************************************************************/</span>
00200     T&amp; <a class="code" href="classdynamicArray.html#a8">operator[]</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> i32Index)
00201     {
00202         _ASSERT(i32Index&lt;m_i32Capacity);
00203         <span class="keywordflow">return</span> m_pArray[i32Index];
00204     }
00205 
00206     <span class="comment">/*!***************************************************************************</span>
00207 <span class="comment">    @Function           []</span>
00208 <span class="comment">    @Input              i32Index    index of element in array</span>
00209 <span class="comment">    @Return         the element indexed</span>
00210 <span class="comment">    @Description        indexed access into array. Note that this has no error</span>
00211 <span class="comment">    checking whatsoever</span>
00212 <span class="comment">    *****************************************************************************/</span>
00213     <span class="keyword">const</span> T&amp; <a class="code" href="classdynamicArray.html#a8">operator[]</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> i32Index)<span class="keyword"> const</span>
<a name="l00214"></a><a class="code" href="classdynamicArray.html#a8">00214</a> <span class="keyword">    </span>{
00215         _ASSERT(i32Index&lt;m_i32Capacity);
00216         <span class="keywordflow">return</span> m_pArray[i32Index];
00217     }
00218 
00219     <span class="comment">/*!***************************************************************************</span>
00220 <span class="comment">    @Function           getSize</span>
00221 <span class="comment">    @Return         size of array</span>
00222 <span class="comment">    @Description        gives current size of array/number of elements</span>
00223 <span class="comment">    *****************************************************************************/</span>
00224     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classdynamicArray.html#a10">getSize</a>()<span class="keyword"> const</span>
00225 <span class="keyword">    </span>{
00226         <span class="keywordflow">return</span> m_i32Size;
00227     }
<a name="l00228"></a><a class="code" href="classdynamicArray.html#a9">00228</a> 
00229     <span class="comment">/*!***************************************************************************</span>
00230 <span class="comment">    @Function           getCapacity</span>
00231 <span class="comment">    @Return         capacity of array</span>
00232 <span class="comment">    @Description        gives current allocated size of array/number of elements</span>
00233 <span class="comment">    *****************************************************************************/</span>
00234     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classdynamicArray.html#a11">getCapacity</a>()<span class="keyword"> const</span>
00235 <span class="keyword">    </span>{
00236         <span class="keywordflow">return</span> m_i32Capacity;
00237     }
00238 
00239     <span class="comment">/*!***************************************************************************</span>
<a name="l00240"></a><a class="code" href="classdynamicArray.html#a10">00240</a> <span class="comment">    @Function           expandToSize</span>
00241 <span class="comment">    @Input              i32Size new capacity of array</span>
00242 <span class="comment">    @Description        expands array to new capacity</span>
00243 <span class="comment">    *****************************************************************************/</span>
00244     <span class="keywordtype">void</span> <a class="code" href="classdynamicArray.html#a12">expandToSize</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> i32Size)
00245     {
00246         <span class="keywordflow">if</span>(i32Size&lt;=m_i32Capacity)
00247             <span class="keywordflow">return</span>; <span class="comment">// nothing to be done</span>
00248 
00249         T *pDeadArray,*pNewArray = <span class="keyword">new</span> T[i32Size]; <span class="comment">// make new array</span>
00250 
<a name="l00251"></a><a class="code" href="classdynamicArray.html#a11">00251</a>         <span class="comment">// copy old values to new array</span>
00252         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;i++)
00253         {
00254             pNewArray[i]=m_pArray[i];
00255         }
00256 
00257         m_i32Capacity=i32Size;
00258         pDeadArray = m_pArray;
00259         m_pArray = pNewArray;
00260         <span class="keyword">delete</span>[](pDeadArray);
00261     }
<a name="l00262"></a><a class="code" href="classdynamicArray.html#a12">00262</a> 
00263     <span class="comment">/*!***************************************************************************</span>
00264 <span class="comment">    @Function           bubbleSort</span>
00265 <span class="comment">    @Description        very basic sorting function for array. Requires &gt; operator</span>
00266 <span class="comment">                        to be defined.</span>
00267 <span class="comment">                        TODO: implement a better sorting algorithm</span>
00268 <span class="comment">    *****************************************************************************/</span>
00269     <span class="keywordtype">void</span> <a class="code" href="classdynamicArray.html#a13">bubbleSort</a>()
00270     {
00271         <span class="keywordtype">bool</span> bSwap;
00272         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;++i)
00273         {
00274             bSwap=<span class="keyword">false</span>;
00275             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0;j&lt;m_i32Size-1;++j)
00276             {
00277                 <span class="keywordflow">if</span>(m_pArray[j]&gt;m_pArray[j+1])
00278                 {
00279                     PVRTswap(m_pArray[j],m_pArray[j+1]);
00280                     bSwap = <span class="keyword">true</span>;
00281                 }
00282             }
00283             <span class="keywordflow">if</span>(!bSwap)
00284                 <span class="keywordflow">return</span>;
00285         }
00286     }
00287 
<a name="l00288"></a><a class="code" href="classdynamicArray.html#a13">00288</a>     <span class="comment">/*!***************************************************************************</span>
00289 <span class="comment">    @Function           bubbleSort</span>
00290 <span class="comment">    @Description        very basic sorting function for array. Requires &gt; operator</span>
00291 <span class="comment">    to be defined.</span>
00292 <span class="comment">    use when T is a pointer so that the &gt; operator is called</span>
00293 <span class="comment">    on the actual type otherwise gets sorted by the pointer</span>
00294 <span class="comment">    addresses - not so useful requires &gt; operator to be defined</span>
00295 <span class="comment">    TODO: implement a better sorting algorithm</span>
00296 <span class="comment">    *****************************************************************************/</span>
00297     <span class="keywordtype">void</span> <a class="code" href="classdynamicArray.html#a14">bubbleSortPointers</a>()
00298     {
00299         <span class="keywordtype">bool</span> bSwap;
00300         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m_i32Size;++i)
00301         {
00302             bSwap=<span class="keyword">false</span>;
00303             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;m_i32Size-1;++j)
00304             {
00305                 <span class="keywordflow">if</span>((*m_pArray[j])&gt;(*m_pArray[j+1]))
00306                 {
00307                     PVRTswap(m_pArray[j],m_pArray[j+1]);
00308                     bSwap = <span class="keyword">true</span>;
00309                 }
00310             }
00311             <span class="keywordflow">if</span>(!bSwap)
00312                 <span class="keywordflow">return</span>;
00313         }
00314     }
00315 
00316 <span class="keyword">private</span>:
<a name="l00317"></a><a class="code" href="classdynamicArray.html#a14">00317</a>     <span class="keywordtype">int</span>     m_i32Size;              
00318     <span class="keywordtype">int</span>     m_i32Capacity;          
00319     T       *m_pArray;              
00320 };
00321 
00322 
00323 
00324 
00325 
00326 
00327 
00328 <span class="preprocessor">#endif // DYNAMIC_ARRAY_H</span>
00329 <span class="preprocessor"></span>
00330 <span class="comment">/*****************************************************************************</span>
00331 <span class="comment">End of file (dynamicArray.h)</span>
00332 <span class="comment">*****************************************************************************/</span>
</pre></div><br>
<br>
<P align=left><FONT size=2><STRONG><A 
   href="http://www.imgtec.com/powervr/insider/legal/index.asp">Copyright</A> © 
   1999-2008, Imagination Technologies Ltd.</STRONG></FONT></P>
<hr>
<address style="align: left;"><small><FONT color=f0f>
Generated by <a href="http://www.doxygen.org/index.html">DOXYGEN</a> 1.3.6</small></address>
</body>
</html>
